<!-- PROFESSIONAL NOTIFICATIONS MANAGEMENT -->
<div class="professional-notifications">
  <!-- Professional Header -->
  <header class="notifications-header">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">
          <i class="icon-notifications"></i>
          Notifications Center
          <span class="pro-badge">Multi-Channel</span>
        </h1>
        <p class="page-subtitle">Manage communications and engage your users effectively</p>
      </div>

      <!-- Communication Stats -->
      <div class="header-stats">
        <div class="stat-card">
          <div class="stat-icon-container">
            <i class="icon-sent"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">{{ getTotalSent() }}</div>
            <div class="stat-label">Total Sent</div>
            <div class="stat-trend positive">+15 this week</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon-container">
            <i class="icon-opens"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">{{ getTotalOpens() | number }}</div>
            <div class="stat-label">Total Opens</div>
            <div class="stat-trend">{{ getAverageOpenRate() }}% avg rate</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon-container">
            <i class="icon-conversions"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">{{ getTotalConversions() }}</div>
            <div class="stat-label">Conversions</div>
            <div class="stat-trend positive">+28% this month</div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon-container">
            <i class="icon-delivery"></i>
          </div>
          <div class="stat-content">
            <div class="stat-number">98.2%</div>
            <div class="stat-label">Delivery Rate</div>
            <div class="stat-trend positive">Industry: 92%</div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Quick Actions Bar -->
  <div class="quick-actions">
    <div class="actions-bar">
      <button class="quick-action-btn compose-btn" (click)="openComposerModal()">
        <i class="icon-compose"></i>
        Compose New
      </button>
      <button class="quick-action-btn quick-send-btn" (click)="quickSendToAllUsers()">
        <i class="icon-quick-send"></i>
        Quick Send
      </button>
      <button class="quick-action-btn ai-campaign-btn" (click)="createAICampaign()">
        <i class="icon-ai"></i>
        AI Campaign
      </button>
      <button class="quick-action-btn analytics-btn" (click)="exportNotificationAnalytics()">
        <i class="icon-analytics"></i>
        Export Analytics
      </button>
      <button class="quick-action-btn optimize-btn" (click)="showDeliveryOptimization()">
        <i class="icon-optimize"></i>
        Optimize Delivery
      </button>
    </div>
  </div>

  <!-- Main Tabs Navigation -->
  <nav class="tabs-navigation">
    <div class="tabs-container">
      <button class="tab-btn"
              [class.active]="activeTab === 'notifications'"
              (click)="activeTab = 'notifications'">
        <i class="icon-notifications-tab"></i>
        Notifications
      </button>
      <button class="tab-btn"
              [class.active]="activeTab === 'templates'"
              (click)="activeTab = 'templates'">
        <i class="icon-templates"></i>
        Templates
      </button>
      <button class="tab-btn"
              [class.active]="activeTab === 'campaigns'"
              (click)="activeTab = 'campaigns'">
        <i class="icon-campaigns"></i>
        Campaigns
      </button>
    </div>
  </nav>

  <!-- Notifications Tab -->
  <section class="notifications-tab" *ngIf="activeTab === 'notifications' && !isLoading">
    <div class="section-header">
      <h2>Notification Management</h2>
      <div class="table-controls">
        <div class="search-container">
          <div class="search-box">
            <i class="icon-search"></i>
            <input type="text" 
                   [(ngModel)]="searchTerm"
                   placeholder="Search notifications..." 
                   class="search-input">
          </div>
        </div>
        <div class="filter-controls">
          <div class="filter-group">
            <label class="filter-label">Status</label>
            <select [(ngModel)]="statusFilter" class="filter-select">
              <option value="all">All Status</option>
              <option value="draft">Draft</option>
              <option value="scheduled">Scheduled</option>
              <option value="sent">Sent</option>
              <option value="failed">Failed</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Type</label>
            <select [(ngModel)]="typeFilter" class="filter-select">
              <option value="all">All Types</option>
              <option value="info">Information</option>
              <option value="success">Success</option>
              <option value="warning">Warning</option>
              <option value="error">Error</option>
              <option value="promotional">Promotional</option>
            </select>
          </div>
          <div class="filter-group">
            <label class="filter-label">Audience</label>
            <select [(ngModel)]="audienceFilter" class="filter-select">
              <option value="all">All Audiences</option>
              <option value="all">All Users</option>
              <option value="premium">Premium Users</option>
              <option value="enterprise">Enterprise Users</option>
              <option value="free">Free Users</option>
              <option value="inactive">Inactive Users</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="table-wrapper">
      <table class="notifications-table">
        <thead>
          <tr>
            <th>Title</th>
            <th>Type</th>
            <th>Audience</th>
            <th>Status</th>
            <th>Opens</th>
            <th>Clicks</th>
            <th>Conversions</th>
            <th>Created</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let notification of getFilteredNotifications()" class="notification-row">
            <td class="title-cell">
              <div class="notification-title">{{ notification.title }}</div>
              <div class="notification-preview">{{ notification.message }}</div>
            </td>
            <td class="type-cell">
              <span class="type-badge" [class]="notification.type">
                {{ getTypeDisplayName(notification.type) }}
              </span>
            </td>
            <td class="audience-cell">
              <span class="audience-badge">
                {{ getAudienceDisplayName(notification.audience) }}
              </span>
            </td>
            <td class="status-cell">
              <span class="status-badge" [class]="notification.status">
                {{ getStatusDisplayName(notification.status) }}
              </span>
            </td>
            <td class="metric-cell">
              <div class="metric-value">{{ notification.opens | number }}</div>
              <div class="metric-rate">{{ getOpenRate(notification) }}%</div>
            </td>
            <td class="metric-cell">
              <div class="metric-value">{{ notification.clicks | number }}</div>
              <div class="metric-rate">{{ getClickRate(notification) }}%</div>
            </td>
            <td class="metric-cell">
              <div class="metric-value">{{ notification.conversions | number }}</div>
              <div class="metric-rate">{{ getConversionRate(notification) }}%</div>
            </td>
            <td class="date-cell">
              <div class="date-value">{{ notification.createdAt }}</div>
            </td>
            <td class="actions-cell">
              <div class="action-buttons">
                <button class="btn-action btn-send" 
                        *ngIf="notification.status === 'draft'"
                        (click)="sendNotification(notification)"
                        title="Send Now">
                  <i class="icon-send"></i>
                </button>
                <button class="btn-action btn-schedule"
                        *ngIf="notification.status === 'draft'"
                        (click)="openScheduleModal(notification)"
                        title="Schedule">
                  <i class="icon-schedule"></i>
                </button>
                <button class="btn-action btn-duplicate"
                        (click)="duplicateNotification(notification)"
                        title="Duplicate">
                  <i class="icon-duplicate"></i>
                </button>
                <button class="btn-action btn-test"
                        *ngIf="notification.status === 'draft'"
                        (click)="testNotification()"
                        title="Test">
                  <i class="icon-test"></i>
                </button>
                <button class="btn-action btn-delete"
                        (click)="deleteNotification(notification)"
                        title="Delete">
                  <i class="icon-delete"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Empty State -->
    <div *ngIf="getFilteredNotifications().length === 0" class="empty-state">
      <div class="empty-icon">
        <i class="icon-notifications"></i>
      </div>
      <div class="empty-content">
        <h3>No Notifications Found</h3>
        <p>Create your first notification to start engaging users</p>
        <button class="btn-primary" (click)="openComposerModal()">
          Create First Notification
        </button>
      </div>
    </div>
  </section>

  <!-- Templates Tab -->
  <section class="templates-tab" *ngIf="activeTab === 'templates' && !isLoading">
    <div class="section-header">
      <h2>Notification Templates</h2>
      <p>Pre-built templates for common communication scenarios</p>
    </div>

    <div class="templates-grid">
      <div *ngFor="let template of templates" class="template-card">
        <div class="template-header">
          <h3 class="template-name">{{ template.name }}</h3>
          <span class="template-category" [class]="template.category">
            {{ getCategoryDisplayName(template.category) }}
          </span>
        </div>
        <div class="template-content">
          <h4 class="template-subject">{{ template.subject }}</h4>
          <p class="template-message">{{ template.message }}</p>
        </div>
        <div class="template-stats">
          <div class="template-stat">
            <span class="stat-value">{{ template.usedCount | number }}</span>
            <span class="stat-label">Used</span>
          </div>
          <div class="template-stat">
            <span class="stat-value">{{ template.successRate }}%</span>
            <span class="stat-label">Success</span>
          </div>
        </div>
        <div class="template-actions">
          <button class="btn-action btn-use" (click)="useTemplate(template)">
            <i class="icon-use"></i>
            Use Template
          </button>
          <button class="btn-action btn-preview">
            <i class="icon-preview"></i>
            Preview
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Campaigns Tab -->
  <section class="campaigns-tab" *ngIf="activeTab === 'campaigns' && !isLoading">
    <div class="section-header">
      <h2>Marketing Campaigns</h2>
      <button class="btn-primary" (click)="openCampaignModal()">
        <i class="icon-create-campaign"></i>
        Create Campaign
      </button>
    </div>

    <div class="campaigns-grid">
      <div *ngFor="let campaign of campaigns" class="campaign-card">
        <div class="campaign-header">
          <h3 class="campaign-name">{{ campaign.name }}</h3>
          <span class="campaign-status" [class]="campaign.status">
            {{ campaign.status }}
          </span>
        </div>
        <div class="campaign-dates">
          <div class="date-item">
            <span class="date-label">Start:</span>
            <span class="date-value">{{ campaign.startDate }}</span>
          </div>
          <div class="date-item">
            <span class="date-label">End:</span>
            <span class="date-value">{{ campaign.endDate }}</span>
          </div>
        </div>
        <div class="campaign-budget">
          <div class="budget-info">
            <span class="budget-spent">${{ campaign.spent | number }}</span>
            <span class="budget-total">of ${{ campaign.budget | number }}</span>
          </div>
          <div class="budget-bar">
            <div class="budget-progress"
                 [style.width]="(campaign.spent / campaign.budget * 100) + '%'">
            </div>
          </div>
        </div>
        <div class="campaign-results">
          <div class="result-item">
            <span class="result-value">{{ campaign.results.sent | number }}</span>
            <span class="result-label">Sent</span>
          </div>
          <div class="result-item">
            <span class="result-value">{{ campaign.results.opens | number }}</span>
            <span class="result-label">Opens</span>
          </div>
          <div class="result-item">
            <span class="result-value">{{ campaign.results.conversions | number }}</span>
            <span class="result-label">Conversions</span>
          </div>
          <div class="result-item">
            <span class="result-value">${{ campaign.results.revenue | number }}</span>
            <span class="result-label">Revenue</span>
          </div>
        </div>
        <div class="campaign-actions">
          <button class="btn-action btn-view">
            <i class="icon-view"></i>
            View Details
          </button>
          <button class="btn-action btn-pause"
                  *ngIf="campaign.status === 'active'"
                  (click)="pauseCampaign(campaign)">
            <i class="icon-pause"></i>
            Pause
          </button>
          <button class="btn-action btn-duplicate">
            <i class="icon-duplicate"></i>
            Duplicate
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading State -->
  <ng-template #loadingTemplate>
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <div class="loading-content">
        <h3>Loading Notifications</h3>
        <p>Please wait while we load the communication data...</p>
      </div>
    </div>
  </ng-template>

  <!-- Composer Modal -->
  <div *ngIf="showComposerModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Compose Notification</h3>
        <button class="modal-close" (click)="closeComposerModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Title</label>
          <input type="text" [(ngModel)]="newNotification.title"
                 class="form-input" placeholder="Enter notification title...">
        </div>
        <div class="form-group">
          <label class="form-label">Message</label>
          <textarea [(ngModel)]="newNotification.message"
                    class="form-textarea"
                    placeholder="Enter your message..."></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Type</label>
            <select [(ngModel)]="newNotification.type" class="form-select">
              <option value="info">Information</option>
              <option value="success">Success</option>
              <option value="warning">Warning</option>
              <option value="error">Error</option>
              <option value="promotional">Promotional</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Audience</label>
            <select [(ngModel)]="newNotification.audience" class="form-select">
              <option value="all">All Users</option>
              <option value="premium">Premium Users</option>
              <option value="enterprise">Enterprise Users</option>
              <option value="free">Free Users</option>
              <option value="inactive">Inactive Users</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeComposerModal()">
          Cancel
        </button>
        <button class="btn-primary" (click)="createNotification()">
          Save Draft
        </button>
      </div>
    </div>
  </div>

  <!-- Schedule Modal -->
  <div *ngIf="showScheduleModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Schedule Notification</h3>
        <button class="modal-close" (click)="closeScheduleModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Schedule Date & Time</label>
          <input type="datetime-local" [(ngModel)]="scheduleDate"
                 class="form-input">
        </div>
        <div class="schedule-preview" *ngIf="selectedNotification">
          <h4>Notification Preview</h4>
          <div class="preview-item">
            <span class="preview-label">Title:</span>
            <span class="preview-value">{{ selectedNotification.title }}</span>
          </div>
          <div class="preview-item">
            <span class="preview-label">Audience:</span>
            <span class="preview-value">{{ getAudienceDisplayName(selectedNotification.audience) }}</span>
          </div>
          <div class="preview-item">
            <span class="preview-label">Estimated Reach:</span>
            <span class="preview-value">~2,847 users</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeScheduleModal()">
          Cancel
        </button>
        <button class="btn-primary" (click)="scheduleNotification()">
          Schedule
        </button>
      </div>
    </div>
  </div>

  <!-- Test Modal -->
  <div *ngIf="showTestModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Test Notification</h3>
        <button class="modal-close" (click)="closeTestModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Test Email</label>
          <input type="email" [(ngModel)]="testEmail"
                 class="form-input" placeholder="Enter test email address">
        </div>
        <div class="test-channels">
          <h4>Test Channels</h4>
          <div class="channel-options">
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span class="checkmark"></span>
              Push Notification
            </label>
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span class="checkmark"></span>
              Email
            </label>
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span class="checkmark"></span>
              In-App Message
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeTestModal()">
          Cancel
        </button>
        <button class="btn-primary" (click)="confirmTest()">
          Send Test
        </button>
      </div>
    </div>
  </div>

  <!-- Campaign Modal -->
  <div *ngIf="showCampaignModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Create Campaign</h3>
        <button class="modal-close" (click)="closeCampaignModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Campaign Name</label>
          <input type="text" [(ngModel)]="newCampaign.name"
                 class="form-input" placeholder="Enter campaign name">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Start Date</label>
            <input type="date" [(ngModel)]="newCampaign.startDate"
                   class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">End Date</label>
            <input type="date" [(ngModel)]="newCampaign.endDate"
                   class="form-input">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Budget ($)</label>
          <input type="number" [(ngModel)]="newCampaign.budget"
                 class="form-input" min="0" step="100">
        </div>
        <div class="campaign-preview">
          <h4>Campaign Preview</h4>
          <div class="preview-item">
            <span class="preview-label">Duration:</span>
            <span class="preview-value">{{ newCampaign.startDate }} to {{ newCampaign.endDate }}</span>
          </div>
          <div class="preview-item">
            <span class="preview-label">Budget:</span>
            <span class="preview-value">${{ newCampaign.budget | number }}</span>
          </div>
          <div class="preview-item">
            <span class="preview-label">Expected Reach:</span>
            <span class="preview-value">15,000-20,000 users</span>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeCampaignModal()">
          Cancel
        </button>
        <button class="btn-primary" (click)="createNewCampaign()">
          Create Campaign
        </button>
      </div>
    </div>
  </div>

  <!-- Export Modal -->
  <div *ngIf="showExportModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Export Analytics Report</h3>
        <button class="modal-close" (click)="closeExportModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="export-options">
          <div class="option-group">
            <h4>Report Format</h4>
            <div class="radio-options">
              <label class="radio-label">
                <input type="radio" name="format" value="pdf" checked>
                <span class="radio-checkmark"></span>
                PDF Report
              </label>
              <label class="radio-label">
                <input type="radio" name="format" value="excel">
                <span class="radio-checkmark"></span>
                Excel Spreadsheet
              </label>
              <label class="radio-label">
                <input type="radio" name="format" value="csv">
                <span class="radio-checkmark"></span>
                CSV Data
              </label>
            </div>
          </div>

          <div class="option-group">
            <h4>Include Data</h4>
            <div class="checkbox-options">
              <label class="checkbox-label">
                <input type="checkbox" checked>
                <span class="checkmark"></span>
                Performance Metrics
              </label>
              <label class="checkbox-label">
                <input type="checkbox" checked>
                <span class="checkmark"></span>
                Revenue Attribution
              </label>
              <label class="checkbox-label">
                <input type="checkbox">
                <span class="checkmark"></span>
                User Engagement Data
              </label>
            </div>
          </div>

          <div class="option-group">
            <h4>Time Range</h4>
            <select class="form-select">
              <option value="7d">Last 7 Days</option>
              <option value="30d">Last 30 Days</option>
              <option value="90d">Last 90 Days</option>
              <option value="1y">Last Year</option>
              <option value="all">All Time</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn-secondary" (click)="closeExportModal()">
          Cancel
        </button>
        <button class="btn-primary" (click)="confirmExport()">
          Generate Report
        </button>
      </div>
    </div>
  </div>
</div>