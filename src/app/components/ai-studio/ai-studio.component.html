<!-- PROFESSIONAL AI STUDIO -->
<div class="professional-ai-studio">
  <!-- Professional Header -->
  <header class="aistudio-header">
    <div class="header-content">
      <div class="title-section">
        <h1 class="page-title">
          <i class="icon-ai">ü§ñ</i>
          AI Studio
          <span class="pro-badge">Neural Networks</span>
        </h1>
        <p class="page-subtitle">Machine Learning Powered Sleep Analytics & Predictions</p>
      </div>

      <!-- Quick Actions -->
      <div class="header-actions">
        <button class="quick-action-btn train-btn" (click)="trainNewModel()">
          <i class="icon-train">üöÄ</i>
          Train Model
        </button>
        <button class="quick-action-btn diagnostic-btn" (click)="runAIDiagnostic()">
          <i class="icon-diagnostic">üîç</i>
          Run Diagnostic
        </button>
        <button class="quick-action-btn god-mode-btn" (click)="enableAIGodMode()">
          <i class="icon-god-mode">üëë</i>
          AI God Mode
        </button>
        <button class="quick-action-btn optimize-btn" (click)="optimizeAllModels()">
          <i class="icon-optimize">‚ö°</i>
          Optimize All
        </button>
      </div>
    </div>

    <!-- AI Stats -->
    <div class="header-stats">
      <div class="stat-card">
        <div class="stat-icon-container">
          <i class="icon-models">üß†</i>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ getTrainedModels() }}</div>
          <div class="stat-label">Models Trained</div>
          <div class="stat-trend positive">+3 this week</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon-container">
          <i class="icon-accuracy">üéØ</i>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ getPredictionAccuracy() }}%</div>
          <div class="stat-label">Accuracy</div>
          <div class="stat-trend positive">+5.2% improved</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon-container">
          <i class="icon-predictions">üîÆ</i>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ getTotalPredictions() | number }}</div>
          <div class="stat-label">Predictions</div>
          <div class="stat-trend">2.4M+ processed</div>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon-container">
          <i class="icon-revenue">üí∞</i>
        </div>
        <div class="stat-content">
          <div class="stat-number">${{ getAIRevenueImpact() | number }}</div>
          <div class="stat-label">Revenue Impact</div>
          <div class="stat-trend positive">+28% from AI</div>
        </div>
      </div>
    </div>
  </header>

  <!-- AI Model Management -->
  <section class="models-section">
    <div class="section-header">
      <h2>AI Model Management</h2>
      <p>Train, deploy, and optimize machine learning models</p>
      <button class="section-action-btn" (click)="trainNewModel()">
        <i class="icon-train">üöÄ</i>
        Train New Model
      </button>
    </div>

    <div class="table-wrapper">
      <table class="models-table">
        <thead>
          <tr>
            <th>Model Name</th>
            <th>Type</th>
            <th>Status</th>
            <th>Accuracy</th>
            <th>Training Data</th>
            <th>Last Trained</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let model of aiModels" class="model-row">
            <td class="model-name-cell">
              <div class="model-name">{{ model.name }}</div>
              <div class="model-version">v{{ model.version }}</div>
            </td>
            <td class="model-type-cell">
              <span class="type-badge">{{ model.type }}</span>
            </td>
            <td class="model-status-cell">
              <span class="status-badge" [style.background]="getStatusColor(model.status)">
                {{ getStatusDisplayName(model.status) }}
              </span>
            </td>
            <td class="model-accuracy-cell">
              <div class="accuracy-value">{{ model.accuracy }}%</div>
              <div class="accuracy-bar">
                <div class="accuracy-fill" [style.width]="model.accuracy + '%'"></div>
              </div>
            </td>
            <td class="model-data-cell">
              <div class="data-value">{{ model.trainingData | number }}</div>
              <div class="data-label">records</div>
            </td>
            <td class="model-date-cell">
              <div class="date-value">{{ model.lastTrained }}</div>
            </td>
            <td class="model-actions-cell">
              <div class="action-buttons">
                <button class="btn-action btn-predict" 
                        (click)="runPrediction(model)"
                        title="Run Prediction">
                  <i class="icon-predict">üîÆ</i>
                </button>
                <button class="btn-action btn-retrain" 
                        (click)="retrainModel(model)"
                        title="Retrain Model">
                  <i class="icon-retrain">üîÑ</i>
                </button>
                <button class="btn-action btn-analytics" 
                        (click)="showModelAnalytics(model)"
                        title="View Analytics">
                  <i class="icon-analytics">üìà</i>
                </button>
                <button class="btn-action btn-deploy" 
                        *ngIf="model.status === 'training'"
                        (click)="deployModel(model)"
                        title="Deploy Model">
                  <i class="icon-deploy">üöÄ</i>
                </button>
                <button class="btn-action btn-stop" 
                        *ngIf="model.status === 'training'"
                        (click)="stopTraining(model)"
                        title="Stop Training">
                  <i class="icon-stop">‚èπÔ∏è</i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Training Jobs -->
  <section class="training-section">
    <div class="section-header">
      <h2>Training Jobs</h2>
      <p>Monitor active model training and optimization</p>
      <div class="job-stats">
        <div class="job-stat">
          <span class="stat-value">{{ getActiveTrainingJobs() }}</span>
          <span class="stat-label">Active Jobs</span>
        </div>
        <div class="job-stat">
          <span class="stat-value">{{ getTrainingSuccessRate() }}%</span>
          <span class="stat-label">Success Rate</span>
        </div>
      </div>
    </div>

    <div class="training-jobs">
      <div *ngFor="let job of trainingJobs" class="training-job-card">
        <div class="job-header">
          <h3 class="job-name">{{ job.modelName }}</h3>
          <span class="job-status" [style.background]="getJobStatusColor(job.status)">
            {{ job.status }}
          </span>
        </div>
        <div class="job-progress">
          <div class="progress-info">
            <span class="progress-label">Training Progress</span>
            <span class="progress-value">{{ job.progress }}%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" 
                 [style.width]="job.progress + '%'"
                 [style.background]="getProgressColor(job.progress)"></div>
          </div>
        </div>
        <div class="job-details">
          <div class="detail-item">
            <span class="detail-label">Start Time:</span>
            <span class="detail-value">{{ job.startTime }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Estimated Completion:</span>
            <span class="detail-value">{{ job.estimatedCompletion }}</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Real-time Predictions -->
  <section class="predictions-section">
    <div class="section-header">
      <h2>Real-time Predictions</h2>
      <p>AI-powered sleep insights and recommendations</p>
      <button class="section-action-btn" (click)="runBulkPredictions()">
        <i class="icon-bulk">‚ö°</i>
        Bulk Predictions
      </button>
    </div>

    <div class="predictions-dashboard">
      <div class="prediction-card">
        <div class="prediction-header">
          <h3>Sleep Quality Prediction</h3>
          <span class="confidence-badge">{{ getPredictionConfidence() }}% confidence</span>
        </div>
        <div class="prediction-content">
          <div class="prediction-metric">
            <span class="metric-label">Expected Sleep Score:</span>
            <span class="metric-value">{{ getPredictedSleepScore() }}</span>
          </div>
          <div class="prediction-metric">
            <span class="metric-label">Optimal Bedtime:</span>
            <span class="metric-value">{{ getOptimalBedtime() }}</span>
          </div>
          <div class="prediction-metric">
            <span class="metric-label">Recommended Sounds:</span>
            <span class="metric-value">{{ getRecommendedSounds() }}</span>
          </div>
        </div>
      </div>

      <div class="prediction-card">
        <div class="prediction-header">
          <h3>AI Insights & Analytics</h3>
          <span class="insight-badge">AI-POWERED</span>
        </div>
        <div class="prediction-content">
          <div class="insights-list">
            <div class="insight-item" *ngFor="let insight of getAIInsights()">
              <i class="insight-icon">üí°</i>
              <span class="insight-text">{{ insight }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- AI Analytics -->
  <section class="ai-analytics-section">
    <div class="section-header">
      <h2>AI Performance Analytics</h2>
      <p>Monitor and optimize your machine learning models</p>
      <button class="section-action-btn" (click)="exportAIAnalytics()">
        <i class="icon-export">üìà</i>
        Export AI Report
      </button>
    </div>

    <div class="analytics-grid">
      <div class="analytics-card">
        <h3>Model Performance</h3>
        <div class="performance-metrics">
          <div class="metric" *ngFor="let metric of getPerformanceMetrics()">
            <span class="metric-name">{{ metric.name }}</span>
            <span class="metric-value">{{ metric.value }}</span>
            <div class="metric-trend" [class]="metric.trend">
              {{ metric.change }}
            </div>
          </div>
        </div>
      </div>

      <div class="analytics-card">
        <h3>AI Impact Analysis</h3>
        <div class="impact-stats">
          <div class="impact-stat">
            <span class="stat-value">${{ getRevenueFromAI() | number }}</span>
            <span class="stat-label">Revenue Generated</span>
          </div>
          <div class="impact-stat">
            <span class="stat-value">{{ getUsersInfluenced() | number }}</span>
            <span class="stat-label">Users Influenced</span>
          </div>
          <div class="impact-stat">
            <span class="stat-value">{{ getSleepImprovement() }}%</span>
            <span class="stat-label">Sleep Improvement</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading State -->
  <ng-template #loadingTemplate>
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <div class="loading-content">
        <h3>Loading AI Studio</h3>
        <p>Initializing neural networks and loading models...</p>
      </div>
    </div>
  </ng-template>

  <!-- Train Model Modal -->
  <div *ngIf="showTrainModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Train New AI Model</h3>
        <button class="modal-close" (click)="closeTrainModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label class="form-label">Model Name</label>
          <input type="text" [(ngModel)]="newModel.name" class="form-input" placeholder="Enter model name">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Model Type</label>
            <select [(ngModel)]="newModel.type" class="form-select">
              <option value="neural-network">Neural Network</option>
              <option value="random-forest">Random Forest</option>
              <option value="deep-learning">Deep Learning</option>
              <option value="gradient-boosting">Gradient Boosting</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Training Data Size</label>
            <input type="number" [(ngModel)]="newModel.trainingDataSize" class="form-input" min="1000" step="1000">
          </div>
        </div>
        <div class="form-group">
          <label class="form-label">Algorithm</label>
          <select [(ngModel)]="newModel.algorithm" class="form-select">
            <option value="deep-learning">Deep Learning</option>
            <option value="supervised">Supervised Learning</option>
            <option value="unsupervised">Unsupervised Learning</option>
            <option value="reinforcement">Reinforcement Learning</option>
          </select>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" (click)="closeTrainModal()">Cancel</button>
          <button class="btn-primary" (click)="confirmTrainModel()">Start Training</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Prediction Modal -->
  <div *ngIf="showPredictionModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Run AI Prediction</h3>
        <button class="modal-close" (click)="closePredictionModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="model-info" *ngIf="selectedModel">
          <h4>Using: {{ selectedModel.name }}</h4>
          <p>Accuracy: {{ selectedModel.accuracy }}% | Type: {{ selectedModel.type }}</p>
        </div>
        <div class="form-group">
          <label class="form-label">Sleep Data</label>
          <textarea [(ngModel)]="predictionInput.sleepData" class="form-textarea" 
                    placeholder="Enter sleep data or upload file..."></textarea>
        </div>
        <div class="form-group">
          <label class="form-label">User Profile</label>
          <input type="text" [(ngModel)]="predictionInput.userProfile" class="form-input" 
                 placeholder="User profile data">
        </div>
        <div class="form-group">
          <label class="form-label">Preferences</label>
          <input type="text" [(ngModel)]="predictionInput.preferences" class="form-input" 
                 placeholder="Sleep preferences">
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" (click)="closePredictionModal()">Cancel</button>
          <button class="btn-primary" (click)="confirmPrediction()">Run Prediction</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Analytics Modal -->
  <div *ngIf="showAnalyticsModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Model Analytics</h3>
        <button class="modal-close" (click)="closeAnalyticsModal()">√ó</button>
      </div>
      <div class="modal-body">
        <div class="analytics-content" *ngIf="selectedModel">
          <div class="analytics-header">
            <h4>{{ selectedModel.name }}</h4>
            <span class="model-version">v{{ selectedModel.version }}</span>
          </div>
          <div class="analytics-grid">
            <div class="analytic-item">
              <span class="analytic-label">Accuracy</span>
              <span class="analytic-value">{{ selectedModel.accuracy }}%</span>
            </div>
            <div class="analytic-item">
              <span class="analytic-label">Training Data</span>
              <span class="analytic-value">{{ selectedModel.trainingData | number }} records</span>
            </div>
            <div class="analytic-item">
              <span class="analytic-label">Last Trained</span>
              <span class="analytic-value">{{ selectedModel.lastTrained }}</span>
            </div>
            <div class="analytic-item">
              <span class="analytic-label">Status</span>
              <span class="analytic-value">{{ getStatusDisplayName(selectedModel.status) }}</span>
            </div>
          </div>
          <div class="performance-chart">
            <h5>Performance Metrics</h5>
            <div class="chart-placeholder">
              <p>Accuracy trend: Stable ‚ÜóÔ∏è</p>
              <p>Training efficiency: 92%</p>
              <p>Prediction speed: 45ms</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Export Modal -->
  <div *ngIf="showExportModal" class="modal-overlay">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Export AI Analytics</h3>
        <button class="modal-close" (click)="closeExportModal()">√ó</button>
      </div>
      <div class="modal-body">
        <p>Export comprehensive AI analytics and performance data.</p>
        <div class="export-options">
          <div class="option-group">
            <h4>Report Format</h4>
            <div class="radio-options">
              <label class="radio-label">
                <input type="radio" name="format" value="pdf" checked>
                <span class="radio-checkmark"></span>
                PDF Report
              </label>
              <label class="radio-label">
                <input type="radio" name="format" value="excel">
                <span class="radio-checkmark"></span>
                Excel Spreadsheet
              </label>
              <label class="radio-label">
                <input type="radio" name="format" value="json">
                <span class="radio-checkmark"></span>
                JSON Data
              </label>
            </div>
          </div>
          <div class="option-group">
            <h4>Include Data</h4>
            <div class="checkbox-options">
              <label class="checkbox-label">
                <input type="checkbox" checked>
                <span class="checkmark"></span>
                Model Performance
              </label>
              <label class="checkbox-label">
                <input type="checkbox" checked>
                <span class="checkmark"></span>
                Prediction Analytics
              </label>
              <label class="checkbox-label">
                <input type="checkbox" checked>
                <span class="checkmark"></span>
                Revenue Impact
              </label>
              <label class="checkbox-label">
                <input type="checkbox">
                <span class="checkmark"></span>
                Training Logs
              </label>
            </div>
          </div>
        </div>
        <div class="modal-actions">
          <button class="btn-secondary" (click)="closeExportModal()">Cancel</button>
          <button class="btn-primary" (click)="confirmExport()">Export Report</button>
        </div>
      </div>
    </div>
  </div>
</div>